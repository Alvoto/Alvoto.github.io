<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>Criador de Interface de Usuário</title>
    <style>
        /* Estilos gerais */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #333;
            color: #fff;
            user-select: none; /* Impede a seleção de texto */
        }
        
        #interface-creator {
            width: 400px;
            padding: 20px;
            background-color: #222;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
            user-select: none; /* Impede a seleção de texto */
        }
        
        h1 {
            text-align: center;
            margin-bottom: 20px;
            user-select: none; /* Impede a seleção de texto */
        }
        
        label {
            display: block;
            margin-bottom: 10px;
            user-select: none; /* Impede a seleção de texto */
        }
        
        input[type="text"],
        select {
            width: calc(100% - 16px);
            padding: 8px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        
        button {
            width: calc(100% - 16px);
            padding: 10px;
            background-color: #464646; /* Alteração da cor para preto */
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-bottom: 10px;
            user-select: none; /* Impede a seleção de texto */
        }
        
        button:hover {
            background-color: #333; /* Cor de destaque ao passar o mouse */
        }

        #interface-screen {
            width: 95%;
            height: 400px;
            border: 1px solid #ccc;
            border-radius: 4px;
            padding: 10px;
            background-color: #444;
            overflow-y: auto;
            margin-bottom: 20px;
            position: relative;
            user-select: none; /* Impede a seleção de texto */
        }

        .ui-element {
            position: absolute;
            text-align: center;
            line-height: 2;
            cursor: pointer;
            user-select: none; /* Impede a seleção de texto */
        }

        .element-options {
            display: none;
            width: 90%;
            padding: 20px;
            background-color: #222;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
            user-select: none; /* Impede a seleção de texto */
        }

        .element-options label {
            display: block;
            margin-bottom: 10px;
            user-select: none; /* Impede a seleção de texto */
        }

        .element-options button {
            width: calc(100% - 16px);
            padding: 10px;
            background-color: #464646;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-bottom: 10px;
            user-select: none; /* Impede a seleção de texto */
        }

        .element-options button:hover {
            background-color: #464646;
        }

        #fullscreen-button {
            padding: 10px;
            background-color: #464646; /* Mantendo a cor verde original */
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-bottom: 10px;
            margin-left: 10px; /* Adicionando margem à esquerda para separar dos outros botões */
            user-select: none; /* Impede a seleção de texto */
        }

        #fullscreen-button:hover {
            background-color: #464646; /* Cor de destaque ao passar o mouse */
        }

        #text-editor {
            width: 95%;
            margin-bottom: 20px;
        }

        #editor {
            width: calc(100% - 16px);
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            resize: vertical;
        }
    </style>
</head>
<body>

<div id="interface-creator">
    <h1>Interface de Usuário</h1>
    <form id="interface-form">
        <label for="element-type">Selecionar Tipo de Elemento:</label>
        <select id="element-type">
            <option value="button">Botão</option>
            <option value="input">Campo de Entrada</option>
            <option value="textarea">Área de Texto</option>
            <option value="checkbox">Caixa de Seleção</option>
            <option value="radio">Botão de Rádio</option>
            <option value="cube">Cubo</option> <!-- Nova opção para criar um cubo -->
        </select>
        <label for="element-label">Rótulo do Elemento:</label>
        <input type="text" id="element-label" placeholder="Elemento">
        <button type="button" onclick="createUIElement()">Criar Elemento</button>
    </form>
</div>

<div id="interface-screen">
    <!-- Elementos UI serão adicionados aqui -->
</div>

<div id="element-options-container">
    <!-- Opções de Elemento para cada elemento criado -->
</div>

<label for="element-select">Selecionar Elemento Criado:</label>
<select id="element-select" onchange="showElementOptions()">
    <!-- Opções adicionadas dinamicamente aqui -->
</select>

<button type="button" id="save-button">Salvar Interface</button>
<button type="button" id="load-button">Carregar Interface</button>

<div id="text-editor">
    <label for="editor">Editor de Texto:</label>
    <textarea id="editor" rows="5" cols="50"></textarea>
</div>

<button id="fullscreen-button" onclick="toggleFullScreen()">play</button>

<script>
    var elementCounter = 0;
    var gravityInterval;

    function createUIElement() {
        var elementType = document.getElementById("element-type").value;
        var elementLabel = document.getElementById("element-label").value || "Elemento"; // Valor padrão para o rótulo

        // Verifica se o rótulo já está em uso
        var counter = 1;
        var uniqueLabel = elementLabel;
        while (document.getElementById("element-" + uniqueLabel)) {
            uniqueLabel = elementLabel + "-" + counter;
            counter++;
        }

        var createdElement;

        if (elementType === "cube") {
            createdElement = document.createElement("div");
            createdElement.classList.add("ui-element");
            createdElement.classList.add("cube");
            createdElement.innerHTML = uniqueLabel;
        } else {
            createdElement = document.createElement(elementType);
            createdElement.classList.add("ui-element");
            createdElement.innerHTML = uniqueLabel;
        }

        var elementId = "element-" + elementCounter;
        createdElement.id = elementId;
        elementCounter++;

        // Define os valores padrão para largura, altura, cor de fundo e posição
        createdElement.style.width = "100px";
        createdElement.style.height = "40px";
        createdElement.style.backgroundColor = "#4caf50";
        createdElement.style.left = "50px";
        createdElement.style.top = "50px";

        document.getElementById("interface-screen").appendChild(createdElement);

        var elementSelect = document.getElementById("element-select");
        var option = document.createElement("option");
        option.value = elementId;
        option.text = uniqueLabel;
        elementSelect.add(option);

        addElementEventListeners(createdElement, elementId, uniqueLabel);
    }

    function addElementEventListeners(createdElement, elementId, elementLabel) {
        createdElement.addEventListener("click", function() {
            var elementOptions = document.querySelectorAll(".element-options");
            elementOptions.forEach(function(option) {
                option.style.display = "none";
            });

            var selectedElementOptions = document.getElementById("element-options-" + elementId);
            selectedElementOptions.style.display = "block";
        });

        var elementOptionsContainer = document.getElementById("element-options-container");
        var elementOptions = document.createElement("div");
        elementOptions.id = "element-options-" + elementId;
        elementOptions.classList.add("element-options");
        elementOptions.innerHTML = `
            <h2>Opções do Elemento: ${elementLabel}</h2>
            <label for="element-id-${elementId}">ID do Elemento:</label>
            <input type="text" id="element-id-${elementId}" onchange="updateElementId('${elementId}')">
            <label for="element-width-${elementId}">Largura<input type="text" id="element-width-${elementId}" onchange="updateElementStyle('${elementId}', 'width')" placeholder="100px">
            <label for="element-height-${elementId}">Altura</label>
            <input type="text" id="element-height-${elementId}" onchange="updateElementStyle('${elementId}', 'height')" placeholder="40px">
            <label for="element-bgcolor-${elementId}">Cor de Fundo:</label>
            <input type="color" id="element-bgcolor-${elementId}" onchange="updateElementStyle('${elementId}', 'backgroundColor')">
            <label for="element-left-${elementId}">Posição à Esquerda:</label>
            <input type="text" id="element-left-${elementId}" onchange="updateElementStyle('${elementId}', 'left')" placeholder="50px">
            <label for="element-top-${elementId}">Posição Superior:</label>
            <input type="text" id="element-top-${elementId}" onchange="updateElementStyle('${elementId}', 'top')" placeholder="50px">
            <button type="button" onclick="toggleGravity('${elementId}')">Toggle Gravidade</button>
            <button type="button" onclick="deleteElement('${elementId}')">Deletar Elemento</button>
        `;
        elementOptionsContainer.appendChild(elementOptions);
    }

    function updateElementStyle(elementId, styleProperty) {
        var element = document.getElementById(elementId);
        var value = document.getElementById(styleProperty + '-' + elementId).value;
        element.style[styleProperty] = value;
    }

    function updateElementId(oldId) {
        var newId = document.getElementById("element-id-" + oldId).value;
        var element = document.getElementById(oldId);

        if (document.getElementById(newId)) {
            alert("ID já está em uso. Escolha um ID diferente.");
            return;
        }

        element.id = newId;

        var option = document.querySelector("#element-select option[value='" + oldId + "']");
        option.value = newId;

        var elementOptions = document.getElementById("element-options-" + oldId);
        elementOptions.id = "element-options-" + newId;

        var inputs = elementOptions.querySelectorAll("input, label");
        inputs.forEach(function(input) {
            if (input.id) input.id = input.id.replace(oldId, newId);
            if (input.htmlFor) input.htmlFor = input.htmlFor.replace(oldId, newId);
        });
    }

    function deleteElement(elementId) {
        var element = document.getElementById(elementId);
        element.remove();

        var option = document.querySelector("#element-select option[value='" + elementId + "']");
        option.remove();

        var elementOptions = document.getElementById("element-options-" + elementId);
        elementOptions.remove();
    }

    function showElementOptions() {
        var elementId = document.getElementById("element-select").value;
        var elementOptions = document.querySelectorAll(".element-options");
        elementOptions.forEach(function(option) {
            option.style.display = "none";
        });

        var selectedElementOptions = document.getElementById("element-options-" + elementId);
        if (selectedElementOptions) selectedElementOptions.style.display = "block";
    }

    function toggleGravity(elementId) {
        var element = document.getElementById(elementId);
        if (element.gravityEnabled) {
            clearInterval(element.gravityInterval);
            element.gravityEnabled = false;
        } else {
            element.gravityEnabled = true;
            element.gravityInterval = setInterval(function() {
                var top = parseFloat(element.style.top);
                if (isNaN(top)) top = 0;
                top += 5;
                if (top + element.offsetHeight > document.getElementById("interface-screen").clientHeight) {
                    clearInterval(element.gravityInterval);
                    element.gravityEnabled = false;
                } else {
                    element.style.top = top + "px";
                }
            }, 100);
        }
    }

    function saveInterface() {
        var interfaceScreen = document.getElementById("interface-screen");
        var elements = interfaceScreen.querySelectorAll(".ui-element");
        var data = Array.from(elements).map(function(element) {
            return {
                id: element.id,
                type: element.tagName.toLowerCase(),
                label: element.innerHTML,
                style: element.style.cssText
            };
        });

        var textarea = document.getElementById("editor");
        textarea.value = JSON.stringify(data, null, 2);
    }

    function loadInterface() {
        var textarea = document.getElementById("editor");
        var data = JSON.parse(textarea.value);

        var interfaceScreen = document.getElementById("interface-screen");
        interfaceScreen.innerHTML = "";

        var elementSelect = document.getElementById("element-select");
        elementSelect.innerHTML = "";

        data.forEach(function(item) {
            var element;
            if (item.type === "div") {
                element = document.createElement("div");
                element.classList.add("ui-element");
                element.classList.add("cube");
                element.innerHTML = item.label;
            } else {
                element = document.createElement(item.type);
                element.classList.add("ui-element");
                element.innerHTML = item.label;
            }
            element.id = item.id;
            element.style.cssText = item.style;

            interfaceScreen.appendChild(element);

            var option = document.createElement("option");
            option.value = item.id;
            option.text = item.label;
            elementSelect.add(option);

            addElementEventListeners(element, item.id, item.label);
        });
    }

    document.getElementById("save-button").addEventListener("click", saveInterface);
    document.getElementById("load-button").addEventListener("click", loadInterface);

    function toggleFullScreen() {
        var elem = document.documentElement;
        if (!document.fullscreenElement) {
            elem.requestFullscreen().catch(err => {
                alert(`Erro ao tentar ativar o modo de tela cheia: ${err.message} (${err.name})`);
            });
        } else {
            document.exitFullscreen();
        }
    }
</script>
</body>
</html>
